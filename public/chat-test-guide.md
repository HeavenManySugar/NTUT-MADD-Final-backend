# 聊天測試界面使用指南

## 概述

這個 HTML 界面是為了測試聊天功能而設計的，它提供了簡單的用戶界面來測試以下功能：

1. 用戶登入/登出
2. 建立新對話
3. 發送和接收訊息
4. 已讀回執功能
5. 輸入狀態指示器
6. 在線狀態顯示

## 如何使用

### 登入

1. 打開頁面後，您會看到一個登入表單
2. 輸入您的電子郵件和密碼（默認值已設置為測試帳號）
3. 點擊"登入"按鈕

### 建立對話

1. 登入後，您可以在頂部的輸入框中輸入其他用戶的電子郵件
2. 點擊"建立對話"按鈕
3. 如果用戶存在，系統會創建一個新對話，或加載已存在的對話
4. 請注意，不能與自己創建對話

### 發送訊息

1. 在左側對話列表中選擇一個對話
2. 在底部的輸入框中輸入訊息
3. 點擊"發送"按鈕或按 Enter 鍵發送
4. 訊息會立即顯示在聊天區域，並發送到服務器

### 其他功能

- **已讀回執**: 當訊息被對方閱讀後，將顯示"已讀"狀態
- **輸入指示器**: 當對方正在輸入時，會在聊天區域底部顯示"對方正在輸入..."
- **在線狀態**: 在線用戶會在對話列表中顯示綠色圓點，離線用戶顯示灰色圓點
- **未讀計數**: 未讀訊息會在對話列表中顯示數量
- **自動重連**: 如果 Socket 連接中斷，將嘗試自動重新連接

## 技術實現

這個測試界面使用以下技術：

- **Socket.IO**: 用於實時通訊
- **Axios**: 用於 HTTP 請求
- **HTML/CSS/JavaScript**: 用於界面實現

## 最新改進

1. **更好的錯誤處理**:

   - 添加了更多的錯誤檢查和提示
   - 改進了 Socket 連接的重連機制

2. **用戶體驗優化**:

   - 添加了加載狀態提示
   - 改進了對話列表和消息顯示
   - 添加了時間戳和更好的未讀計數顯示

3. **安全性增強**:

   - 改進了 Token 處理
   - 增加了連接時的錯誤處理

4. **界面美化**:
   - 優化了界面樣式
   - 添加了使用說明提示

## 故障排除

如果遇到問題，可以嘗試以下解決方案：

1. **無法連接**: 請確保服務器正在運行，且地址和端口正確
2. **登入失敗**: 確認您的電子郵件和密碼正確
3. **訊息未送達**: 檢查 Socket 連接是否成功
4. **界面顯示異常**: 嘗試重新整理頁面或清除瀏覽器緩存

如有其他問題，請查閱服務器日誌以獲取更多信息。
